# DP: For armhf, force arm mode instead of thumb mode

--- a/src/gcc/java/lang-specs.h
+++ a/src/gcc/java/lang-specs.h
@@ -48,6 +48,7 @@
       %{.java|fsaw-java-file:%U.jar -fsource-filename=%i %<ffilelist-file} \
       %{.class|.zip|.jar|ffilelist-file|fcompile-resource*:%i}		\
       %(jc1) %(cc1_options) %{I*} %{!findirect-dispatch:-faux-classpath %U.zip} \
+      -march=armv6 -marm \
       %{MD:-MD_} %{MMD:-MMD_} %{M} %{MM} %{MA} %{MT*} %{MF*}\
       %(invoke_as)}",
       0, 0, 0},
--- a/src/libjava/configure.host
+++ b/src/libjava/configure.host
@@ -66,6 +66,9 @@
     ;;
 esac
 
+# force an architecture with arm mode
+libgcj_flags="${libgcj_flags} -march=armv6"
+
 AM_RUNTESTFLAGS= 
 
 # Set any host dependent compiler flags.
