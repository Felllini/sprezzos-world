Description: Improvements to the buildsystem.
 - Install missing link.
 - Rename 'tests' target to 'check' (to make
   debhelper compile tests automatically).
 - Set system-wide CFLAGS values properly.
 - Don't build static libraries.
Author: Alessio Treglia <alessio@debian.org>
Forwarded: no
---
 Makefile.in |   10 ++++------
 1 file changed, 4 insertions(+), 6 deletions(-)

--- rtaudio.orig/Makefile.in
+++ rtaudio/Makefile.in
@@ -6,29 +6,27 @@ LN = /bin/ln
 
 OBJECTS	= RtAudio.o @objects@
 
-STATIC = librtaudio.a
 SHARED = @sharedlib@
 RELEASE = 4.0.11
 MAJOR = 4
-LIBRARIES = $(STATIC) $(SHARED)
+LIBRARIES = $(SHARED)
 
 CC       = @CXX@
 AR       = @AR@
 RANLIB   = @RANLIB@
 
 DEFS     = @CPPFLAGS@
-CFLAGS   = @CXXFLAGS@ -Iinclude -fPIC
+CFLAGS   += @CXXFLAGS@ -Iinclude -fPIC
 
 all : $(LIBRARIES)
 
-tests:
+check:
 	cd tests && $(MAKE) all
 
 $(LIBRARIES): $(OBJECTS)
-	$(AR) ruv $(STATIC) $(OBJECTS)
-	ranlib $(STATIC)
 	$(CC) -fPIC @libflags@ $(OBJECTS) @LIBS@
 	$(LN) -s @sharedname@ $(SHARED)
+	$(LN) -s @sharedname@ $(SHARED).$(MAJOR)
 
 #	$(CC) -shared $(OBJECTS) -o $(SHARED) @LIBS@
 
