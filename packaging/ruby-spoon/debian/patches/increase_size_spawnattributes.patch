Description: SpawnAttributes is 336 bytes on 64bit linux
 Allocation 128 bytes causes memory corruption on 64 bit linux. Because
 the structure underneath is bigger. Increase the size.
Author: Eugene Pimenov <eugene@libc.st>
Origin: https://github.com/libc/spoon/commit/9eceb369adf086ad407bd562f74fb43a4e1c2c02
Reviewed-by: CÃ©dric Boutillier <boutil@debian.org>
Last-Update: 2012-12-26
---
 lib/spoon/unix.rb |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/lib/spoon/unix.rb
+++ b/lib/spoon/unix.rb
@@ -51,7 +51,7 @@
 
   class SpawnAttributes
     attr_reader :pointer
-    SIZE = FFI::Platform.mac? ? FFI.type_size(:pointer) : 128
+    SIZE = FFI::Platform.mac? ? FFI.type_size(:pointer) : 336
 
     def initialize
       @pointer =  FFI::AutoPointer.new(LibC.malloc(SIZE), self.class)
