$Id: suppress_warnings.patch 379 2012-09-20 11:45:26Z tg $

Suppress warnings from being run within FusionForgeâ€™s gforge-plugin-mediawiki

--- a/includes/GlobalFunctions.php
+++ b/includes/GlobalFunctions.php
@@ -2199,7 +2199,9 @@ function wfNegotiateType( $cprefs, $spre
  *
  * @param $end Bool
  */
+$wf__warnings_suppressed = false;
 function wfSuppressWarnings( $end = false ) {
+	global $wf__warnings_suppressed;
 	static $suppressCount = 0;
 	static $originalLevel = false;
 
@@ -2208,6 +2210,7 @@ function wfSuppressWarnings( $end = fals
 			--$suppressCount;
 			if ( !$suppressCount ) {
 				error_reporting( $originalLevel );
+				$wf__warnings_suppressed = false;
 			}
 		}
 	} else {
@@ -2217,6 +2220,7 @@ function wfSuppressWarnings( $end = fals
 				define( 'E_DEPRECATED', 8192 );
 			}
 			$originalLevel = error_reporting( E_ALL & ~( E_WARNING | E_NOTICE | E_USER_WARNING | E_USER_NOTICE | E_DEPRECATED ) );
+			$wf__warnings_suppressed = true;
 		}
 		++$suppressCount;
 	}
@@ -3362,7 +3366,7 @@ function wfSetupSession( $sessionId = fa
 		wfFixSessionID();
 	}
 	wfSuppressWarnings();
-	session_start();
+	@session_start();
 	wfRestoreWarnings();
 }
 
